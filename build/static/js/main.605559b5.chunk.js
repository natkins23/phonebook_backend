(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(3),o=t(2),i=t(4),u=t.n(i),s="/api/persons",d=t(0),j=function(e){var n=e.persons,t=e.removePerson;return n.map((function(e){return Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))},b=function(e){var n=e.filter,t=e.filterChange;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{children:["filter shown with",Object(d.jsx)("input",{value:n,onChange:t})]})})},h=function(e){var n=e.name,t=e.nameChange,c=e.number,r=e.numberChange,a=e.addPerson;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:n,onChange:t})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:c,onChange:r})]})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:a,type:"submit",children:"add"})})]})})},f=function(e){var n=e.notification;return null===n?null:Object(d.jsx)("div",{className:n.type,children:n.message})},l=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),i=Object(a.a)(r,2),l=i[0],m=i[1],O=Object(o.useState)(""),v=Object(a.a)(O,2),p=v[0],x=v[1],g=Object(o.useState)(""),w=Object(a.a)(g,2),C=w[0],k=w[1],y=Object(o.useState)(null),P=Object(a.a)(y,2),S=P[0],A=P[1],B={name:l.trim(),number:p.trim()},D=B.name,E=B.number,F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";A({message:e,type:n}),setTimeout((function(){A(null)}),5e3)};Object(o.useEffect)((function(){u.a.get(s).then((function(e){return e.data})).then((function(e){c(e)}))}),[]);var J=C.length>0?t.filter((function(e){return e.name.includes(C)})):t;return Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"3.12-3.18: MongoDB"}),Object(d.jsx)("h2",{children:" Phonebook "}),Object(d.jsx)(f,{notification:S}),Object(d.jsx)(b,{filter:C,filterChange:function(e){k(e.target.value)}}),Object(d.jsx)("h2",{children:" add a new "}),Object(d.jsx)(h,{name:l,nameChange:function(e){m(e.target.value)},number:p,numberChange:function(e){x(e.target.value)},addPerson:function(e){e.preventDefault();var n,r,a=t.find((function(e){return D===e.name}));a?window.confirm("".concat(D," is already added to the phonebook, replace the old number with a new one?"))&&(n=a.id,r={name:a.name,number:E},u.a.put("".concat(s,"/").concat(n),r).then((function(e){return e.data}))).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e}))),F("Changed number of  ".concat(a.name)),m(""),x("")})).catch((function(e){F("".concat(e.response.data.error," "),"error")})):function(e){return u.a.post(s,e).then((function(e){return e.data}))}({name:D,number:E}).then((function(e){c(t.concat(e)),F("Added  ".concat(D)),m(""),x("")})).catch((function(e){F("".concat(e.response.data.error," "),"error")}))}}),Object(d.jsx)("h2",{children:" Numbers "}),Object(d.jsx)(j,{persons:J,removePerson:function(e){var n=t.find((function(n){return n.id=e}));window.confirm("Are you sure you want to delete ".concat(n.name))&&function(e){return u.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),F("Removed ".concat(n.name))})).catch((function(r){c(t.filter((function(n){return n.id!==e}))),F("".concat(n.name," had already been removed"),"error")}))}})]})};t(40);r.a.render(Object(d.jsx)(l,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.605559b5.chunk.js.map